

## Reference

[relevant section of Effective Go](https://go.dev/doc/effective_go.html#allocation_new)

## 分配内存

分配内存是指为程序中的变量或数据结构保留一块内存空间。分配内存的操作通常由编程语言的运行时系统或操作系统来管理。分配内存并不意味着内存中的数据被设置为某个特定的值，它只是确保这块内存可以被程序使用。

- 动态内存分配：在运行时根据需要分配内存，例如使用 Go 中的 new 或 make，C 语言中的 malloc。
- 静态内存分配：在编译时分配内存，例如全局变量或静态变量。

在 Go 中，new 函数用于分配内存并返回指向该内存的指针。分配的内存会被置为类型的零值，但这并不算是初始化。

## 初始化内存

初始化内存是指将分配的内存设置为一个已知的、特定的初始值。初始化确保在使用内存之前，内存中的数据是可预测的和有效的。

- 显式初始化：程序员在代码中明确地为变量赋值。
- 隐式初始化：某些编程语言会自动将分配的内存设置为默认值（如 Go 中的零值）。

在 Go 中，make 函数不仅分配内存，还初始化切片、映射和通道，使它们可以立即使用。

```go
package main

import "fmt"

func main() {
    // 使用 new 分配内存
    p := new(int) // 分配内存，p 是一个指向 int 的指针
    fmt.Println(*p) // 输出: 0，内存被置为零值，但未显式初始化

    // 显式初始化
    *p = 42
    fmt.Println(*p) // 输出: 42，内存被初始化为 42

    // 使用 make 分配和初始化切片
    s := make([]int, 5) // 分配并初始化一个长度为 5 的切片
    fmt.Println(s) // 输出: [0 0 0 0 0]，切片被初始化为零值

    // 显式初始化切片
    s[0] = 10
    fmt.Println(s) // 输出: [10 0 0 0 0]
}
```