简单说一下AT&T汇编，"#"井号开头的是注释行，"."点开始的指令一般都是伪指令，"$"美元符号修饰立即数，"%"修饰寄存器。例如：

```text
.section .data
```

表示数据段的开始

```text
movl $1, %ebx
```

表示把数字1写入ebx寄存器。

```text
movl 0xFFFF0000, %eax
```

表示把0xFFFF0000地址处的32位数写入eax寄存器。

## **寻址方式**

以前经常要背诵的什么基址寻址，变址寻址，基址变址寻址神马的太绕人了，又不好记。 我觉得内存地址的引用就这一种格式：

```text
地址或偏移(%基址或偏移量寄存器, %索引寄存器, 比例因子)
```

地址的计算公式是：

```text
最终地址 = 地址或偏移 + %基址或偏移量寄存器 + %索引寄存器  * 比例因子
```

这一串东西基本上都是可选的，没写的项基本上算以0代替，不同的组合就成了不同的寻址方式，如下：

- ***直接寻址\***

```text
movl ADDRESS, %eax
```

ADDRESS其实就相当于"地址或偏移"里的地址，反正就是一个数字。

- 寄存器寻址

其实上面的例子也包括了寄存器寻址，顾名思义%eax就是寄存器寻址，代表对这个寄存器本身的写入或读出。

- ***立即寻址\***

```text
movl $2, %ebx
```

我一直觉得立即寻址算不算寻址，反正它的意思就是把2这个数字写入%eax寄存器，$2就是立即寻址，其实就是立即数。

- ***间接寻址\***

```text
movl (%eax), %ebx
```

(%eax)就是间接寻址了，意思就是访问eax寄存器里的数值所代表的地址。相当于通用公式里的%基址或偏移量寄存器。

- ***索引寻址（变址寻址）***

```text
movl 0xFFFF0000(,%eax,4), %ebx
```

0xFFFF0000(,%eax,4)就是索引寻址，意思是从0xFFFF0000地址开始，加上%eax * 4作为索引的最终地址。请自行匹配上面的通用公式。

- ***基址寻址***

```text
movl 4(%eax), %ebx
```

4(%eax)就是基址寻址，意思是以eax寄存器里的数值作为基址，加上4得到最终地址。也可以匹配到上面的通用公式，而且这个是很常用的寻址方式。



反正不管怎么变，万变不离其宗