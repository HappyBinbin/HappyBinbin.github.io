# 第二章

课后习题和问题

##### R1

列出 5 种非专用的因特网应用及它们所使用的应用层协议

1. 网址：HTTP
2. 文件传输：FTP
3. 远程登录：Telnet
4. 电子邮件：SMTP
5. BitTorrent文件共享：BitTorrent协议

##### R2

网络系结构与应用程序体系结构之间有什么区别 ？

- 网络体系结构是指将通信过程组织成多个层次（五层互联网体系结构）
- 应用程序体系结构是由程序的开发人员设定的（C/S，或P2P)

##### R3

对两进程之间的通信会话而言 ， 哪个进程是客户 ， 哪个进程是服务器?

​	发起通信的进程是客户，等待连接的进程则是服务器

##### R4

对一个 P2P 文件共享应用 ， 你同意 “ 一个通信会话不存在客户端和服务器端的概念 ” 的说法吗 ？ 为什么?

​	不同意，接收方就是客户端，发送放就是服务器端

##### R5

运行在一台主机上的一个进程 ， 使用什么信息来标识运行在另一台主机上的进程?

​	利用IP地址+端口号

##### R6

假定你想尽快地处理从远程客户到服务器的事务 ， 你将使用 UDP 还是 TCP? 为什么 ？

​	UDP，因为它是无连接的，不需要事前进行三次握手确认连接，事务可以在一个RTT内完成请求和应答；而TCP则至少需要两个RTT，一个用来确认连接，一个用来请求和响应

##### R7

参见图 2 .4, 我们看到在该图中所列出的应用程序没有一个同时既要求无数据丢失又要求定时的 。 你能设想一个既要求无数据丢失又高度时间敏感的应用程序吗?

![image-20210525112924828](https://happychan.oss-cn-shenzhen.aliyuncs.com/img/image-20210525112924828.png)

​	使⽤Google文档进行远程文字处理就是⼀个这样的例⼦。但是，由于Google⽂档在Internet上运行（使⽤TCP），因此没有提供定时保证。

##### R8

列出一个运输协议能够提供的 4 种宽泛类型的服务 。 对于每种服务类型 ， 指出是 UDP 还是 TCP （ 或这两种协议 ） 提供这样的服务 ？

1. 可靠的数据传输：TCP
2. 保证一定的吞吐量：要根据当时的网络情况来判断，两种协议都不能保证
3. 保证数据在规定时间内交付：都不
4. 保证数据的安全性：都不

##### R9

前面讲过 TCP 能用 SSL 来强化 ， 以提供进程到进程的安全性服务 ， 包括加密 。 SSL 运行在运输层还是应用层 ？ 如果某应用程序研制者想要用 SSL 来强化 UDP, 该研制者应当做些什么工作 ？

​	OSI七成模型中，表示层是作用于数据加密和数据压缩，所以SSL是运行在表示层的，而在五层模型中，表示层与会话层均归于应用层。

握手协议的作用是什么 ？

​	两个应用程序相互交换通信的控制信息

##### R11

为什么 HTTP 、 SMTP 及 POP3 都运行在 TCP, 而不是 UDP 上 ？

​	与这些协议相关的应用程序都要求可靠的数据传输，即要求确保数据的正确性，TCP提供该服务器而普通的UDP则不提供。

##### R12

考虑一个电子商务网站需要保留每一个客户的购买记录 。 描述如何使用 cookie 来完成该功能 ？

​	当用户第一次访问站点时，服务器在后端数据库为其创建一个唯一的标识号，并且将该标识号（cookie编号）加入到HTTP的响应头中返回。用户的浏览器在接受到响应报文后，会将其中的cookie编号保存在浏览器的cookie文件中。当用户后续再访问站点时，服务器就能够通过cookie编号来识别用户，收集用户的信息

##### R13

描述 Web 缓存器是如何减少接收被请求对象的时延的。Web 缓存器将减少一个用户请求的所有对象或只是其中的某些对象的时延吗 ？ 为什么 ？

​	Web缓存器中存储了最近请求过的对象的副本。web请求会先定向到Web缓存器。只能减少部分对象的时延。因为Web缓存器只存储了访问过的副本，未访问过的对象在Web缓存器中没有。此时就不能减少请求该对象的时延了。

##### R14（略）

Telnet 到一台 Web 服务器并发送一个多行的请求报文，在该请求报文中包含 If - modified - since : 首部行 ， 迫使响应报文中出现 “ 304 Not Modified" 状态代码。

​	略；

##### R15

列出几种流行的即时通信应用 。 它们使用相同的协议作为 SMS 吗?

- 电子邮件
- FaceBook
- 微信

它们所用的应用层协议各不相同



##### R16

假定Alice使用一个基于Web的电子邮件账户(例如Hotmail或Gmail)向Bob发报文, 而Bob使用POP3从他的邮件服务器访问自己的邮件. 讨论该报文是如何从Alice主机到Bob主机的，列出在两台主机间移动该报文时所使用的各种应用层协议

- Alice主机 === HTTP协议 ====> Alice邮件服务器
- Alice邮件服务器 === SMTP协议 ====> Bob邮件服务器
- Bob邮件服务器 === POP3协议 ====> Bob主机

##### R17（略）

将你最近收到的报文首部打印出来. 其中有多少Received: 首部行? 分析该报文的首部行中的每一行.

​	略；

##### R18

从用户的观点看, POP3协议中下载并删除模式和下载并保存模式有什么区别吗?

​	区别在于，下载后是删除还是保留，删除的话，用户在别的客户端登录的时候，就无法取回邮件了。而如果保留，那么即使在本地的邮件丢失，都可以在邮件服务器中重新取回邮件

##### R19

一个机构的Web服务器和邮件服务器可以有完全相同的主机名别名吗? 包含邮件服务器主机名的RR有什么样的类型?

​	是的，组织的邮件服务器和Web服务器可以具有与主机名相同的别名。MX记录用于将邮件服务器的主机名映射到其IP地址。

##### R20

仔细检查收到的电子邮件, 查找由使用.edu电子邮件地址的用户发送的报文首部. 从其首部, 能够确定发送该报文的主机的IP地址吗? 对于由Gmail账号发送的报文做相同的事

​	能够使用.edu电子邮件地址查看发送方的IP地址。但是，如果用户使用Gmail帐户，您将无法看到发件人的IP地址

##### R21

在BitTorrent中, 假定Alice向Bob提供一个30秒间隔的文件块吞吐量. Bob将必须进行回报, 在相同的间隔中向Alice提供文件块吗? 为什么?

​	不是必须的，因为Alice会选取一定数量的"邻居", 并从它们那里获得块. 而这个选择不是基于Alice向谁发送了块就要向谁索要块, 而是在Alice的对等方列表中向对等方发起请求, 选取响应速度快的前4位上载者来获取块. Alice获取块的伴侣也是不停更新的.

##### R22

考虑一个新对等方Alice加入BitTorrent而不拥有任何文件块. 没有任何文件快, 因此她没有任何东西可上载, 她无法成为任何其他对等方的前4位上载者. 那么Alice是怎样得到她的第一个文件块呢?

​	每过30秒，其它对等方将随机的选择一名新的对等方开始对换，如果选择到了Alice，则Alice就会获得文件块。

##### R23

覆盖网络是什么? 它包括路由器吗? 在覆盖网络中边是什么?

​	覆盖网络是一种面向应用层的网络，包括对等方和对等方之间由虚拟联络构成的抽象的逻辑网。覆盖网络不包括路由器。在覆盖网络中“边”就是对等方和对等方之间的逻辑链路。

##### R24

CDN通常采用两种不同的服务器放置方法之一. 列举并简单描述它们.

- 深入

    ​	通过在遍及全球的接入ISP中部署服务器集群来深入到ISP的接入网中。好处是靠近用户，减少端用户和CND集群之间的链路和路由器的数量，改善了用户感受到的时延和吞吐量；缺点是由于高度分布式设计，维护和管理集群的成本很高

- 邀请做客

    ​	通过在少量的关键位置建造大量集群来邀请ISP做客，这些CDN集群通常放在因特网交换节点（IXP）。好处是产生较低的维护和管理开销；缺点是以端用户的较高时延和较低吞吐量为代价

##### R25

除了如时延, 丢包和带宽性能等网络相关的考虑外, 设计一种CDN服务器选择策略时还有其他重要因素. 它们是什么?

​	除了网络相关的因素之外，还有一些重要的因素需要考虑。例如负载均衡、日效应、网络中的DNS服务器之间的变化、很少访问视频的可用性有限以及需要缓解流行视频内容可能产生的热点、ISP的交付成本



R26

2.7节中所描述的UDP服务器仅需要一个套接字, 而TCP服务器需要两个套接字. 为什么? 如果TCP服务器支持n个并行连接, 每条连接来自不同的客户主机, 那么TCP服务器需要多少个套接字.

 	因为UDP服务器没有欢迎套接字，来自不同客户端的所有数据都通过这个套接字进入服务器。TCP服务器一个端口只能与一个客户端建立连接，因此需要空出端口来接受新的客户端连接，需要n+1个套接字

##### R27

对于2.7节所描述的运行在TCP之上的客户-服务器应用程序, 服务器程序为什么必须先于客户程序运行? 对于运行在UDP之上的客户-服务器应用程序, 客户程序为什么可以先于服务器程序运行.

​	因为TCP发送之前需要建立连接，UDP不需要。

