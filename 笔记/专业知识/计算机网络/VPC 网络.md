## Reference

- [什么是专有网络VPC？](https://www.aliyun.com/getting-started/what-is/what-is-vpc)
- [什么是vSwitch？](https://www.aliyun.com/getting-started/what-is/what-is-a-vswitch)
- [什么是路由？](https://www.aliyun.com/getting-started/what-is/what-is-a-vswitch)
- [专有网络产品介绍🌟](https://help.aliyun.com/zh/vpc/product-overview/virtual-private-cloud-overview)

## 概念

> 专有网络VPC（Virtual Private Cloud）是一种专有的云上私有网络，允许用户在公共云上配置和管理一个逻辑隔离的网络区域。这个虚拟网络区域使用户能够控制虚拟网络环境，包括选择自己的IP地址范围、创建子网、配置路由表和网络网关。VPC提供了类似于传统数据中心的安全和可配置的私有网络空间，同时又具备云计算的弹性和可扩展性。

组成（最简单的结构）：
- 一个私网网段
	- 创建专有网络和交换机时，以CIDR地址块的形式指定专有网络使用的私网网段。
- 路由器
	- 连接专有网络内的各个交换机和其他网络的网关设备
- 交换机
	- 基础网络设备，用于划分一个或多个子网
![image.png](https://happychan.oss-cn-shenzhen.aliyuncs.com/picgo/20250424221508.png)

## 原理

- 隧道技术：隧道技术是实现网络隔离的关键。每个VPC都有一个独立的隧道号，一个隧道号对应着一个虚拟化网络。
    
    - 一个VPC内的ECS实例间传输的数据包会通过隧道封装，带有唯一的隧道号标识，通过物理网络进行传输。
        
    - 不同VPC内的ECS实例由于所在的隧道号不同，本身处于两个不同的路由平面，因此不同VPC内的ECS实例无法进行通信，天然地进行了隔离。
        
- SDN技术：SDN作为新型的网络架构，将网络设备的控制平面与数据平面分离，实现了网络流量的集中管理和控制。VPC中的SDN控制器可以动态地配置网络策略，如路由、安全规则等，而无需直接操作底层硬件，大大提高了网络的灵活性和可编程性。
    
- 硬件网关和自研交换机设备：支持高性能的数据转发，满足大规模VPC的高吞吐量需求。

## 网络逻辑架构

阿里云的VPC网络架构，包含交换机、网关和控制器三个重要的组件。
交换机和网关组成了数据通路的关键路径，控制器使用自研协议下发转发表到网关和交换机，完成了配置通路的关键路径。
配置通路和数据通路互相分离。VPC中的交换机是分布式的节点，网关和控制器都是集群部署且多机房互备，所有链路上都具备冗余容灾，提升了VPC的整体可用性。

![image.png](https://happychan.oss-cn-shenzhen.aliyuncs.com/picgo/20250424221832.png)


## 应用场景

- 安全部署应用程序
	- 您可以将对外提供服务的应用程序部署在VPC中，并且可以通过创建安全组规则、访问控制白名单等方式控制互联网访问。您也可以在应用程序服务器和数据库之间进行访问控制隔离，将Web服务器部署在能够进行公网访问的子网中，将应用程序的数据库部署在没有配置公网访问的子网中。
    
- 部署主动访问公网的应用程序
	- 您可以将需要主动访问公网的应用程序部署在VPC中的一个子网内，通过公网NAT网关路由其流量。通过配置SNAT规则，子网中的实例无需暴露其私网IP地址即可访问互联网，并可随时替换公网IP，避免被外界攻击。
    
- 跨可用区容灾
	- 您可以通过创建交换机为VPC划分一个或多个子网。同一VPC内不同交换机之间内网互通。您可以通过将资源部署在不同可用区的交换机中，实现跨可用区容灾。
    
- 业务系统隔离
	- 不同的VPC之间逻辑隔离。如果您有多个业务系统例如生产环境和测试环境要严格进行隔离，那么可以使用多个VPC进行业务隔离。当有互相通信的需求时，可以将两个VPC加入[云企业网CEN](https://www.aliyun.com/product/cbn)实现互通。
    
- 构建混合云
	- VPC提供专用网络连接，可以将本地数据中心和VPC连接起来，扩展本地网络架构。通过该方式，您可以将本地应用程序无缝地迁移至云上，并且不必更改应用程序的访问方式。
