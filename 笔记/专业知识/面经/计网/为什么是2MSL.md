# 为毛是2MSL

1. 为了可靠地实现全双工连接的终止，假设图2-5中客户端发送的最后一个ACK丢失，服务端将重传FIN，为了能够收到这个超时重传的FIN，客户端需要TIME_WAIT状态；那TIME_WAIT状态就必须是2MSL了吗？其实这个要看服务端FIN的超时重传时间RTO，如果RTO小于MSL，那TIME_WAIT状态MSL就够了，如果RTO大于2MSL那么TIME_WAIT状态2MSL也是不够的，所以只有RTO在MSL和2MSL之间的时候，TIME_WAIT 状态存在的理由1才是TIME_WAIT的时间是2MSL的原因。其实一般情况下，RTO都是远远小于MSL的，但考虑到最糟糕的情况，RTO是为2MSL，所以TIME_WAIT状态为2MSL可以保证最糟糕情况也可以收到超时重传的 FIN

2. 为了保证本连接持续的时间所产生的所有分组都从网络中消失，也就是保证新建立一个TCP连接时，来自该连接老的重复分组都已经在网络中消失了。这里可能有的人会有个疑问：客户端回复最后一个ACK之后，感觉一个MSL就可以所有分组消失了啊，为什么还要2MSL所有分组才消失呢？我的理解是：假设客户端发送ACK刚刚过了一个MSL时间，而服务端在收到这个ACK之前一瞬间刚好启动超时重传FIN，所以要等这个FIN也消失，就是2MSL了。文中所指的另一个方向的应答应该就是这个超时重传的 FIN